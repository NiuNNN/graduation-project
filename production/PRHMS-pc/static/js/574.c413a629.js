"use strict";(self["webpackChunkpc_web"]=self["webpackChunkpc_web"]||[]).push([[574],{574:function(t,e,r){r.r(e),r.d(e,{default:function(){return f}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container"},[e("div",{staticClass:"header-container"},[e("h1",[t._v("房 型 管 理")]),e("el-button",{staticClass:"add",attrs:{disabled:t.isAdd},on:{click:function(e){return t.openDrawer("add")}}},[t._v("添 加 +")])],1),e("div",{staticClass:"table-container"},[e("div",{staticClass:"navbar"},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"50px",inline:!0}},[e("el-row",{attrs:{justify:"space-around"}},[e("el-col",{attrs:{span:5}},[e("el-form-item",{attrs:{label:"房型"}},[e("el-select",{attrs:{placeholder:"请选择房型"},on:{change:t.search},model:{value:t.form.styleName,callback:function(e){t.$set(t.form,"styleName",e)},expression:"form.styleName"}},[e("el-option",{attrs:{label:"----请选择-----",value:""}}),t._l(t.styleNameList,(function(t,r){return e("el-option",{key:r,attrs:{label:t,value:t}})}))],2)],1)],1),e("el-col",{attrs:{span:5}},[e("el-form-item",{attrs:{label:"阳台"}},[e("el-select",{attrs:{placeholder:"请选择阳台"},on:{change:t.search},model:{value:t.form.balcony,callback:function(e){t.$set(t.form,"balcony",e)},expression:"form.balcony"}},[e("el-option",{attrs:{label:"----请选择-----",value:""}}),e("el-option",{attrs:{label:"有",value:"有"}}),e("el-option",{attrs:{label:"无",value:"无"}})],1)],1)],1),e("el-col",{attrs:{span:5}},[e("el-form-item",{attrs:{label:"楼层"}},[e("el-select",{attrs:{placeholder:"请选择楼层"},on:{change:t.search},model:{value:t.form.floor,callback:function(e){t.$set(t.form,"floor",e)},expression:"form.floor"}},[e("el-option",{attrs:{label:"----请选择-----",value:""}}),e("el-option",{attrs:{label:"高",value:"高"}}),e("el-option",{attrs:{label:"低",value:"低"}})],1)],1)],1),e("el-col",{attrs:{span:9}},[e("span",{staticClass:"area"},[t._v("总 面 积 : "+t._s(t.area)+" (㎡)")]),e("span",{staticClass:"area",staticStyle:{color:"#00d0b5"}},[t._v("可 用 面 积 : "+t._s(t.available)+" (㎡)")])])],1)],1)],1),e("div",{staticClass:"table"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},scopedSlots:t._u([{key:"empty",fn:function(){return[e("el-empty",{attrs:{"image-size":200}})]},proxy:!0}])},[e("el-table-column",{attrs:{prop:"styleId",label:"编号",width:"80"}}),e("el-table-column",{attrs:{prop:"styleName",label:"房型名称",width:"200"}}),e("el-table-column",{attrs:{prop:"area",label:"面积(㎡)"}}),e("el-table-column",{attrs:{prop:"balcony",label:"阳台"}}),e("el-table-column",{attrs:{prop:"floor",label:"楼层"}}),e("el-table-column",{attrs:{prop:"num",label:"数量(间)"}}),e("el-table-column",{attrs:{prop:"available",label:"空余(间)"}}),e("el-table-column",{attrs:{prop:"price",label:"租金(元/㎡)"}}),e("el-table-column",{attrs:{prop:"state",label:"状态"}}),e("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-button",{attrs:{size:"mini",type:"primary",disabled:t.isEdit},on:{click:function(e){return t.openDrawer("edit",r.row)}}},[t._v("编 辑")]),"正常"==r.row.state?[e("el-button",{attrs:{size:"mini",type:"danger",disabled:t.isPull},on:{click:function(e){return t.handleDelete(r.row)}}},[t._v("下 架")])]:[e("el-button",{attrs:{size:"mini",type:"info",disabled:t.isUp},on:{click:function(e){return t.handleReset(r.row)}}},[t._v("上 架")])]]}}])})],1)],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,background:"",layout:"prev, pager, next",total:t.pagination.total},on:{"current-change":t.handleCurrentChange}})],1)]),e("div",{staticClass:"drawer"},[e("el-drawer",{attrs:{title:t.drawerTitle,size:"28%",visible:t.isShowDrawer,"before-close":t.handleClose},on:{"update:visible":function(e){t.isShowDrawer=e}}},[e("el-form",{ref:"styleForm",attrs:{model:t.styleForm,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"房型名称",prop:"styleName"}},[e("el-input",{attrs:{placeholder:"请输入房型名称"},model:{value:t.styleForm.styleName,callback:function(e){t.$set(t.styleForm,"styleName","string"===typeof e?e.trim():e)},expression:"styleForm.styleName"}})],1),e("el-form-item",{attrs:{label:"面积(㎡)",prop:"area"}},[e("el-input",{attrs:{placeholder:"请输入该房型面积"},model:{value:t.styleForm.area,callback:function(e){t.$set(t.styleForm,"area",t._n("string"===typeof e?e.trim():e))},expression:"styleForm.area"}})],1),e("el-form-item",{attrs:{label:"阳台",prop:"balcony"}},[e("el-radio-group",{model:{value:t.styleForm.balcony,callback:function(e){t.$set(t.styleForm,"balcony",e)},expression:"styleForm.balcony"}},[e("el-radio",{attrs:{label:"有"}}),e("el-radio",{attrs:{label:"无"}})],1)],1),e("el-form-item",{attrs:{label:"楼层",prop:"floor"}},[e("el-radio-group",{model:{value:t.styleForm.floor,callback:function(e){t.$set(t.styleForm,"floor",e)},expression:"styleForm.floor"}},[e("el-radio",{attrs:{label:"高"}}),e("el-radio",{attrs:{label:"低"}})],1),e("span",{staticStyle:{"margin-left":"15px",color:"#ff2855","font-size":"12px"}},[t._v("*6楼以上为高楼层")])],1),e("el-form-item",{attrs:{label:"数量(间)",prop:"num"}},[e("el-input",{attrs:{placeholder:"请输入该房型数量"},model:{value:t.styleForm.num,callback:function(e){t.$set(t.styleForm,"num","string"===typeof e?e.trim():e)},expression:"styleForm.num"}})],1),e("el-form-item",{attrs:{label:"租金(元/㎡)",prop:"price"}},[e("el-input",{attrs:{placeholder:"请输入该房型租金"},model:{value:t.styleForm.price,callback:function(e){t.$set(t.styleForm,"price","string"===typeof e?e.trim():e)},expression:"styleForm.price"}})],1),e("el-form-item",[e("div",{staticStyle:{"margin-top":"20px"}},[e("el-button",{attrs:{type:"primary",disabled:t.isAdd},on:{click:t.submit}},[t._v("确 认")]),e("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)])],1)],1)],1)])},l=[],n=r(50),s=r(5532),o=r(9176),i=r(6585),c={data(){const t=(t,e,r)=>{(0,o.BP)(e)?r():r(new Error("请输入数字"))};return{styleNameList:[],available:"",area:"",form:{styleName:"",balcony:"",floor:""},styleForm:{styleName:"",area:"",price:"",num:"",balcony:"",floor:""},drawerTitle:"",isShowDrawer:!1,tableData:[],rules:{styleName:[{required:!0,message:"请输入房型名称",trigger:"blur"}],area:[{required:!0,message:"请输入该房型面积",trigger:"blur"},{validator:t,message:"面积必须为数字值",trigger:"blur"}],price:[{required:!0,message:"请输入该房型面积",trigger:"blur"},{validator:t,message:"价格必须为数字值",trigger:"blur"}],num:[{required:!0,message:"请输入该房型数量",trigger:"blur"},{validator:t,message:"数量必须为数字值",trigger:"blur"}],balcony:[{required:!0,message:"请选择阳台信息",trigger:"blur"}],floor:[{required:!0,message:"请选择楼层信息",trigger:"blur"}]},isCurrent:"",pagination:{currentPage:1,pageSize:8,total:0}}},created(){this.getAllStyle(),this.getStyleName(),this.getArea()},methods:{cancel(){this.isShowDrawer=!1,this.reset()},reset(){this.$refs.styleForm.resetFields(),this.styleForm={styleName:"",area:"",price:"",num:"",balcony:"",floor:""}},async getArea(){try{const{data:t}=await(0,n.b)(1);this.area=t.area,this.available=t.available}catch(t){console.log(t)}},async getAllStyle(){try{const t=`${this.pagination.currentPage}/${this.pagination.pageSize}`,{data:e}=await(0,s.KR)(t);this.tableData=e.records,this.pagination.currentPage=e.current,this.pagination.total=e.total,this.pagination.pageSize=e.size}catch(t){console.log(t)}},openDrawer(t,e){"add"==t&&(this.drawerTitle="添加房型",this.isCurrent="add"),"edit"==t&&(this.drawerTitle="修改房型",this.isCurrent="edit",this.styleForm={...e}),this.isShowDrawer=!0},async submit(){try{if(await this.$refs.styleForm.validate(),"add"==this.isCurrent)try{const t=await(0,s.CQ)(this.styleForm);this.$message.success(t.message)}catch(t){console.log(t)}if("edit"==this.isCurrent)try{const t=await(0,s.Uz)(this.styleForm);this.$message.success(t.message),console.log(t)}catch(t){console.log(t)}}catch(t){console.log(t)}finally{this.isShowDrawer=!1,this.$refs.styleForm.resetFields(),this.getStyleName(),this.getAllStyle(),this.getArea()}},async handleDelete(t){try{const e=await(0,s.tn)(t.styleId);this.$message.success(e.message)}catch(e){console.log(e)}finally{this.getAllStyle(),this.getStyleName(),this.getArea()}},async handleReset(t){try{const e=await(0,s.YN)(t.styleId);this.$message.success(e.message)}catch(e){console.log(e)}finally{this.getAllStyle(),this.getStyleName(),this.getArea()}},handleClose(t){(0,o.kz)(this.styleForm)?t():this.$confirm("确认关闭？").then((e=>{this.reset(),t()})).catch((t=>{}))},handleCurrentChange(t){this.pagination.currentPage=t,this.getAllStyle()},async getStyleName(){this.form={styleName:"",balcony:"",floor:""};const{data:t}=await(0,s.PG)(1);this.styleNameList=t},async search(){try{const t=`${this.pagination.currentPage}/${this.pagination.pageSize}`,{data:e}=await(0,s.KR)(t,this.form);this.tableData=e.records,this.pagination.currentPage=e.pages,this.pagination.total=e.total}catch(t){console.log(t)}}},computed:{isAdd(){return i.kL(this.$route.params.type)},isDel(){return i.bK(this.$route.params.type)},isUp(){return i.EN(this.$route.params.type)},isPull(){return i.kX(this.$route.params.type)},isEdit(){return i.mi(this.$route.params.type)},isGet(){return i.Xu(this.$route.params.type)}}},u=c,m=r(1001),p=(0,m.Z)(u,a,l,!1,null,"5b584080",null),f=p.exports},50:function(t,e,r){r.d(e,{W:function(){return n},b:function(){return l}});var a=r(9312);function l(t){return(0,a.U2)(`/getArea/${t}`,{})}function n(){return(0,a.U2)("/getFloor",{})}},5532:function(t,e,r){r.d(e,{$K:function(){return u},CQ:function(){return l},KR:function(){return n},Oj:function(){return p},PG:function(){return c},Uz:function(){return i},YN:function(){return s},tn:function(){return o},x3:function(){return m},zs:function(){return f}});var a=r(9312);function l(t){return(0,a.v_)("/insertStyle",t)}function n(t,e){return(0,a.U2)(`/getAllStyle/${t}`,e)}function s(t){return(0,a.U2)(`/resetStyle/${t}/1`)}function o(t){return(0,a.U2)(`/resetStyle/${t}/0`)}function i(t){return(0,a.v_)("/updateStyle",t)}function c(t){return(0,a.U2)(`/getStyleName/${t}`,{})}function u(t,e){return(0,a.U2)(`/getStyleArea/${t}`,e)}function m(t,e){return(0,a.U2)(`/getStyleBalcony/${t}`,e)}function p(t,e){return(0,a.U2)(`/leftStyle/${t}`,e)}function f(){return(0,a.U2)("getAllStyleName",{})}},6585:function(t,e,r){function a(t){const e="1";return c(t,e)}function l(t){const e="2";return c(t,e)}function n(t){const e="3";return c(t,e)}function s(t){const e="4";return c(t,e)}function o(t){const e="5";return c(t,e)}function i(t){const e="6";return c(t,e)}function c(t,e){let r=t.split("").filter((t=>!isNaN(t)));return!r.includes(e)}r.d(e,{EN:function(){return n},Xu:function(){return i},bK:function(){return l},kL:function(){return a},kX:function(){return s},mi:function(){return o}})},9176:function(t,e,r){function a(t){return/^1[3-9]\d{9}$/.test(t)}function l(t){let e=!0;return Object.keys(t).forEach((function(r){null!==t[r]&&""!=t[r]&&(e=!1)})),e}function n(t){return"NaN"!=parseFloat(t).toString()}function s(t){return""===t||null===t}r.d(e,{BP:function(){return n},Lp:function(){return a},kz:function(){return l},n3:function(){return s}})}}]);
//# sourceMappingURL=574.c413a629.js.map