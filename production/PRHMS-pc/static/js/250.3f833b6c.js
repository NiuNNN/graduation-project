"use strict";(self["webpackChunkpc_web"]=self["webpackChunkpc_web"]||[]).push([[250],{3250:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-container"},[t("div",{staticClass:"header-container"},[t("h1",[e._v("收 费 管 理")]),t("el-button",{staticClass:"add",attrs:{disabled:e.isAdd},on:{click:function(t){return e.openDrawer("add")}}},[e._v("添 加 +")])],1),t("div",{staticClass:"table-container"},[t("div",{staticClass:"table"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},scopedSlots:e._u([{key:"empty",fn:function(){return[t("el-empty",{attrs:{"image-size":200}})]},proxy:!0}])},[t("el-table-column",{attrs:{prop:"baseId",label:"编号",width:"120"}}),t("el-table-column",{attrs:{prop:"baseName",label:"收费名称",width:"120"}}),t("el-table-column",{attrs:{prop:"price",label:"价格(元)",width:"120"}}),t("el-table-column",{attrs:{prop:"remark",label:"详情"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isEdit},on:{click:function(t){return e.openDrawer("edit",r.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"mini",disabled:e.isDel||r.row.baseId<=2},on:{click:function(t){return e.deleteBasic(r.row)}}},[e._v("删除")])]}}])})],1)],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,background:"",layout:"prev, pager, next",total:e.pagination.total},on:{"current-change":e.handleCurrentChange}})],1),t("div",{staticClass:"drawer"},[t("el-drawer",{attrs:{title:e.drawerTitle,size:"28%",visible:e.isShowDrawer,"before-close":e.handleClose},on:{"update:visible":function(t){e.isShowDrawer=t}}},[t("el-form",{ref:"baseForm",attrs:{model:e.baseForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"收费名称",prop:"baseName"}},[t("el-input",{attrs:{placeholder:"请输入收费名称"},model:{value:e.baseForm.baseName,callback:function(t){e.$set(e.baseForm,"baseName","string"===typeof t?t.trim():t)},expression:"baseForm.baseName"}})],1),t("el-form-item",{attrs:{label:"价格(元)",prop:"price"}},[t("el-input",{attrs:{placeholder:"请输入收费价格"},model:{value:e.baseForm.price,callback:function(t){e.$set(e.baseForm,"price","string"===typeof t?t.trim():t)},expression:"baseForm.price"}})],1),t("el-form-item",{attrs:{label:"立即生效",prop:"operation"}},[t("el-radio-group",{model:{value:e.baseForm.operation,callback:function(t){e.$set(e.baseForm,"operation",t)},expression:"baseForm.operation"}},[t("el-radio",{attrs:{label:"0"}},[e._v("否")]),t("el-radio",{attrs:{label:"1"}},[e._v("是")])],1)],1),t("el-form-item",{attrs:{label:"详情",prop:"remark"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:20},placeholder:"请输入该收费详情"},model:{value:e.baseForm.remark,callback:function(t){e.$set(e.baseForm,"remark",t)},expression:"baseForm.remark"}})],1),t("el-form-item",[t("span",{staticStyle:{"font-size":"10px",color:"#ff2855"}},[e._v("*默认不立即生效为下一个月生效")]),t("div",[t("el-button",{attrs:{type:"primary",disabled:e.isAdd},on:{click:e.submit}},[e._v("确 认")]),t("el-button",{on:{click:function(t){e.isShowDrawer=!1}}},[e._v("取 消")])],1)])],1)],1)],1)])])},n=[],i=r(5364),s=r(6585),o=r(9176),u=r(2900),l={data(){const e=(e,t,r)=>{(0,o.BP)(t)?r():r(new Error("请输入数字"))};return{pagination:{currentPage:1,pageSize:8,total:0},tableData:[],isShowDrawer:!1,drawerType:"",baseForm:{baseName:"",price:"",remark:"",operation:"0"},rules:{baseName:[{required:!0,message:"请输入收费名称",trigger:"blur"}],price:[{required:!0,message:"请输入收费价格",trigger:"blur"},{validator:e,message:"价格必须为数字值",trigger:"blur"}],operation:[{required:!0,message:"请选择是否立即生效",trigger:"blur"}],remark:[{required:!0,message:"请输入该收费详情",trigger:"blur"}]}}},created(){this.getAllBasic()},methods:{async getAllBasic(){try{const e=`${this.pagination.currentPage}/${this.pagination.pageSize}`,{data:t}=await(0,i.wS)(e);this.tableData=t.records,this.pagination.currentPage=t.current,this.pagination.total=t.total,this.pagination.pageSize=t.size}catch(e){console.log(e)}},handleCurrentChange(e){this.pagination.currentPage=e,this.getAllBasic()},handleClose(e){this.$confirm("确认关闭？").then((t=>{e()})).catch((e=>{}))},openDrawer(e,t){this.reset(),this.drawerType=e,this.isShowDrawer=!0,"edit"===this.drawerType&&(this.baseForm={baseName:t.baseName,price:t.price,remark:t.remark,operation:t.operation,baseId:t.baseId})},async submit(){try{await this.$refs.baseForm.validate(),"add"===this.drawerType&&(await(0,i.uX)(this.baseForm),this.$message.success("添加成功")),"edit"===this.drawerType&&(await(0,i.nx)(this.baseForm),this.$message.success("修改成功"))}catch(e){console.log(e)}finally{this.getAllBasic(),this.reset(),this.isShowDrawer=!1}},reset(){this.baseForm={baseName:"",price:"",remark:"",operation:"0"}},deleteBasic(e){this.$prompt("请输入密码","删除该收费",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password",inputPattern:/^\w{5,12}$/,inputErrorMessage:"密码格式不正确"}).then((async({value:t})=>{try{console.log(t),await(0,u.uo)({password:t,username:this.$store.getters.username}),await(0,i.mZ)({baseId:e.baseId}),this.$message.success("删除成功")}catch(r){console.log(r)}finally{this.getAllBasic()}})).catch((()=>{this.$message({type:"info",message:"取消输入"})}))}},computed:{drawerTitle(){let e="默认大标题";return"add"===this.drawerType&&(e="添 加 收 费"),"edit"===this.drawerType&&(e="修 改 收 费"),e},isAdd(){return s.kL(this.$route.params.type)},isDel(){return s.bK(this.$route.params.type)},isUp(){return s.EN(this.$route.params.type)},isPull(){return s.kX(this.$route.params.type)},isEdit(){return s.mi(this.$route.params.type)},isGet(){return s.Xu(this.$route.params.type)}}},c=l,p=r(1001),d=(0,p.Z)(c,a,n,!1,null,"66619c1a",null),m=d.exports},5364:function(e,t,r){r.d(t,{Cj:function(){return c},FE:function(){return s},Q$:function(){return u},Sh:function(){return m},hU:function(){return l},mZ:function(){return p},nx:function(){return d},oC:function(){return o},uX:function(){return n},wS:function(){return i}});var a=r(9312);function n(e){return(0,a.v_)("insertBasic",e)}function i(e,t){return(0,a.U2)(`getAllBasic/${e}`,t)}function s(){return(0,a.U2)("getBasic",{})}function o(e){return(0,a.U2)("getBasicByUserId",e)}function u(e){return(0,a.U2)("changeMiscellaneousState",e)}function l(e){return(0,a.U2)("getNoBasicByRentId",e)}function c(e){return(0,a.U2)("insertMiscellaneous",e)}function p(e){return(0,a.U2)("deleteBasic",e)}function d(e){return(0,a.v_)("updateBasic",e)}function m(e){return(0,a.U2)("getOrderMis",e)}},6585:function(e,t,r){function a(e){const t="1";return l(e,t)}function n(e){const t="2";return l(e,t)}function i(e){const t="3";return l(e,t)}function s(e){const t="4";return l(e,t)}function o(e){const t="5";return l(e,t)}function u(e){const t="6";return l(e,t)}function l(e,t){let r=e.split("").filter((e=>!isNaN(e)));return!r.includes(t)}r.d(t,{EN:function(){return i},Xu:function(){return u},bK:function(){return n},kL:function(){return a},kX:function(){return s},mi:function(){return o}})},9176:function(e,t,r){function a(e){return/^1[3-9]\d{9}$/.test(e)}function n(e){let t=!0;return Object.keys(e).forEach((function(r){null!==e[r]&&""!=e[r]&&(t=!1)})),t}function i(e){return"NaN"!=parseFloat(e).toString()}function s(e){return""===e||null===e}r.d(t,{BP:function(){return i},Lp:function(){return a},kz:function(){return n},n3:function(){return s}})}}]);
//# sourceMappingURL=250.3f833b6c.js.map