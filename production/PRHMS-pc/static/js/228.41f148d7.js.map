{"version":3,"file":"static/js/228.41f148d7.js","mappings":"uJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACJ,EAAIK,GAAG,GAAGH,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,UAAU,CAACI,IAAI,OAAOC,MAAM,CAAC,MAAQP,EAAIQ,KAAK,cAAc,OAAO,QAAS,IAAO,CAACN,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,OAAO,CAACL,EAAG,WAAW,CAACK,MAAM,CAAC,YAAc,SAASE,MAAM,CAACC,MAAOV,EAAIQ,KAAKG,UAAWC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIQ,KAAM,YAAaK,EAAI,EAAEE,WAAW,qBAAqB,GAAGb,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,OAAO,CAACL,EAAG,iBAAiB,CAACK,MAAM,CAAC,KAAO,OAAO,YAAc,QAAQ,iBAAiBP,EAAIgB,kBAAkB,eAAe,cAAcP,MAAM,CAACC,MAAOV,EAAIQ,KAAKS,MAAOL,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIQ,KAAM,QAASK,EAAI,EAAEE,WAAW,iBAAiB,GAAGb,EAAG,YAAY,CAACgB,YAAY,CAAC,OAAS,QAAQX,MAAM,CAAC,KAAO,WAAWY,GAAG,CAAC,MAAQnB,EAAIoB,SAAS,CAACpB,EAAIqB,GAAG,SAAS,IAAI,GAAGnB,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,WAAW,CAACgB,YAAY,CAAC,MAAQ,QAAQX,MAAM,CAAC,KAAOP,EAAIsB,UAAU,OAAS,GAAG,OAAS,MAAM,eAAe,CAAEC,KAAM,OAAQC,MAAO,eAAgBC,YAAYzB,EAAI0B,GAAG,CAAC,CAACC,IAAI,QAAQC,GAAG,WAAW,MAAO,CAAC1B,EAAG,WAAW,CAACK,MAAM,CAAC,aAAa,OAAO,EAAEsB,OAAM,MAAS,CAAC3B,EAAG,kBAAkB,CAACK,MAAM,CAAC,KAAO,SAAS,MAAQ,KAAK,SAAW,GAAG,MAAQ,SAASL,EAAG,kBAAkB,CAACK,MAAM,CAAC,KAAO,YAAY,MAAQ,KAAK,MAAQ,SAASL,EAAG,kBAAkB,CAACK,MAAM,CAAC,KAAO,UAAU,MAAQ,QAAQL,EAAG,kBAAkB,CAACK,MAAM,CAAC,KAAO,QAAQ,MAAQ,KAAK,MAAQ,OAAOkB,YAAYzB,EAAI0B,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASE,GAAO,MAAO,CAAqB,GAAnBA,EAAMC,IAAIC,MAAY9B,EAAG,OAAO,CAACF,EAAIqB,GAAG,SAASnB,EAAG,OAAO,CAACF,EAAIqB,GAAG,SAAS,OAAOnB,EAAG,kBAAkB,CAACK,MAAM,CAAC,MAAQ,KAAK,MAAQ,OAAOkB,YAAYzB,EAAI0B,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASE,GAAO,MAAO,CAAC5B,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,UAAU,KAAO,QAAQ,SAAWP,EAAIiC,OAAOd,GAAG,CAAC,MAAQ,SAASe,GAAQ,OAAOlC,EAAImC,WAAY,OAAOL,EAAMC,IAAI,IAAI,CAAC/B,EAAIqB,GAAG,SAASnB,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,SAAS,KAAO,QAAQ,SAAWP,EAAIoC,OAA6B,KAApBN,EAAMC,IAAIC,OAAcb,GAAG,CAAC,MAAQ,SAASe,GAAQ,OAAOlC,EAAIqC,aAAaP,EAAMC,IAAI,IAAI,CAAC/B,EAAIqB,GAAG,SAAS,QAAQ,IAAI,GAAGnB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,gBAAgB,CAACK,MAAM,CAAC,eAAeP,EAAIsC,WAAWC,YAAY,YAAYvC,EAAIsC,WAAWE,SAAS,WAAa,GAAG,OAAS,oBAAoB,MAAQxC,EAAIsC,WAAWG,OAAOtB,GAAG,CAAC,iBAAiBnB,EAAI0C,wBAAwB,GAAGxC,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,YAAY,CAACK,MAAM,CAAC,MAAQP,EAAI2C,YAAY,KAAO,MAAM,QAAU3C,EAAI4C,aAAa,eAAe5C,EAAI6C,aAAa1B,GAAG,CAAC,iBAAiB,SAASe,GAAQlC,EAAI4C,aAAaV,CAAM,IAAI,CAAChC,EAAG,MAAM,CAACE,YAAY,MAAM,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,kBAAkB,CAACK,MAAM,CAAC,MAAQ,QAAQ,OAAS,IAAI,CAACL,EAAG,WAAW,CAAC4C,KAAK,SAAS,CAAC5C,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,UAAU,KAAO,QAAQ,SAAWP,EAAI+C,QAAwB,OAAd/C,EAAIgC,OAAgBb,GAAG,CAAC,MAAQ,SAASe,GAAQlC,EAAIgD,eAAgB,CAAI,IAAI,CAAChD,EAAIqB,GAAG,WAAW,GAAGnB,EAAG,uBAAuB,CAACK,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIqB,GAAGrB,EAAIiD,GAAGjD,EAAIkD,OAAOC,WAAWjD,EAAG,uBAAuB,CAACK,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIqB,GAAGrB,EAAIiD,GAAGjD,EAAIkD,OAAOE,QAAQlD,EAAG,uBAAuB,CAACK,MAAM,CAAC,MAAQ,OAAO,CAACP,EAAIqB,GAAGrB,EAAIiD,GAAGjD,EAAIkD,OAAOvC,cAAcT,EAAG,uBAAuB,CAACK,MAAM,CAAC,MAAQ,QAAQ,CAACP,EAAIqB,GAAGrB,EAAIiD,GAAGjD,EAAIkD,OAAOG,SAASnD,EAAG,uBAAuB,CAACK,MAAM,CAAC,MAAQ,OAAO,CAACP,EAAIqB,GAAGrB,EAAIiD,GAAGjD,EAAIkD,OAAOI,YAAYpD,EAAG,uBAAuB,CAACK,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIqB,GAAGrB,EAAIiD,GAAGjD,EAAIkD,OAAOK,WAAWrD,EAAG,uBAAuB,CAACK,MAAM,CAAC,MAAQ,OAAO,CAACP,EAAIqB,GAAGrB,EAAIiD,GAAGjD,EAAIgC,UAAU9B,EAAG,uBAAuB,CAACK,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIqB,GAAGrB,EAAIiD,GAAGjD,EAAIkD,OAAOM,WAAW,IAAI,QAAQ,GAAGtD,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,YAAY,CAACK,MAAM,CAAC,MAAQ,SAAS,QAAUP,EAAIgD,cAAc,MAAQ,MAAM,eAAehD,EAAI6C,aAAa1B,GAAG,CAAC,iBAAiB,SAASe,GAAQlC,EAAIgD,cAAcd,CAAM,IAAI,CAAChC,EAAG,UAAU,CAACI,IAAI,aAAaC,MAAM,CAAC,MAAQP,EAAIyD,WAAW,cAAc,OAAO,MAAQzD,EAAI0D,QAAQ,CAACxD,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,OAAO,KAAO,UAAU,CAACL,EAAG,WAAW,CAACO,MAAM,CAACC,MAAOV,EAAIyD,WAAWD,MAAO5C,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIyD,WAAY,QAAS5C,EAAI,EAAEE,WAAW,uBAAuB,GAAGb,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,OAAO,KAAO,WAAW,CAACL,EAAG,WAAW,CAACK,MAAM,CAAC,KAAO,YAAYE,MAAM,CAACC,MAAOV,EAAIyD,WAAWF,OAAQ3C,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIyD,WAAY,SAAU5C,EAAI,EAAEE,WAAW,wBAAwB,IAAI,GAAGb,EAAG,OAAO,CAACE,YAAY,gBAAgBG,MAAM,CAAC,KAAO,UAAUuC,KAAK,UAAU,CAAC5C,EAAG,YAAY,CAACiB,GAAG,CAAC,MAAQnB,EAAI2D,QAAQ,CAAC3D,EAAIqB,GAAG,SAASnB,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,WAAWY,GAAG,CAAC,MAAQ,SAASe,GAAQ,OAAOlC,EAAI4D,cAAc,IAAI,CAAC5D,EAAIqB,GAAG,UAAU,IAAI,IAAI,MACvmJ,EACIwC,EAAkB,CAAC,WAAY,IAAI7D,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,KAAK,CAACF,EAAIqB,GAAG,cAClI,G,oBCKO,SAASyC,EAAaC,EAAOC,GAClC,OAAOC,EAAAA,EAAAA,IAAK,gBAAeF,IAASC,EACtC,CAOO,SAAS3B,EAAa0B,GAC3B,OAAOE,EAAAA,EAAAA,IAAK,eAAeF,EAC7B,CAOO,SAASG,EAAoBH,GAClC,OAAOE,EAAAA,EAAAA,IAAK,sBAAsBF,EACpC,CAKO,SAASI,EAAeJ,GAC7B,OAAOE,EAAAA,EAAAA,IAAK,iBAAiBF,EAC/B,C,cCoDA,GACAK,OACA,MAAAC,EAAAA,CAAAC,EAAA5D,EAAAE,MACA2D,EAAAA,EAAAA,IAAA7D,GAAAE,IAAAA,EAAA,IAAA4D,MAAA,WAEA,OACAxD,kBAAA,CACAyD,aAAAC,GACAA,EAAAC,UAAAC,KAAAC,OAGArE,KAAA,CACAS,MAAA,GACAN,UAAA,IAEAW,UAAA,GACAgB,WAAA,CACAC,YAAA,EACAC,SAAA,EACAC,MAAA,GAEAG,cAAA,EACAkC,WAAA,GACA5B,OAAA,GACAlB,MAAA,GACAgB,eAAA,EACAS,WAAA,CACAD,MAAA,GACAD,OAAA,IAEAG,MAAA,CACAF,MAAA,CACA,CAAAuB,UAAA,EAAAzB,QAAA,UAAA0B,QAAA,QACA,CACAC,UAAAZ,EACAf,QAAA,aACA0B,QAAA,SAGAzB,OAAA,EAAAwB,UAAA,EAAAzB,QAAA,UAAA0B,QAAA,UAGA,EACAE,UACA,KAAAC,QACA,EACAC,QAAA,CAEA,eACA,MAAArB,EAAA,QAAAzB,WAAAC,eAAA,KAAAD,WAAAE,YACA,KAAA4B,SAAAN,EAAAC,EAAA,CACApD,UAAA,KAAAH,KAAAG,UACAwC,OAAA,KAAA3C,KAAAS,QAEA,KAAAK,UAAA8C,EAAAiB,QACA,KAAA/C,WAAAC,YAAA6B,EAAAkB,QACA,KAAAhD,WAAAG,MAAA2B,EAAA3B,MACA,KAAAH,WAAAE,SAAA4B,EAAAmB,IAEA,EAEA7C,oBAAAH,GACA,KAAAD,WAAAC,YAAAA,EACA,KAAA4C,QACA,EAEA/D,SACA,KAAA+D,SACA,KAAA3E,KAAA,EACA,EAEA,iBAAAgF,EAAAzD,GACA,IAGA,GAFA,KAAAa,cAAA,EACA,KAAAkC,WAAAU,EACA,GAAAzD,EAAAC,MACA,KAAAA,MAAA,MACA,KAAAkB,OAAAnB,MACA,CACA,KAAAC,MAAA,MACA,WAAAoC,SAAAF,EAAA,CAAAuB,SAAA1D,EAAA0D,WACA,KAAAvC,OAAAkB,CACA,CAEA,OAAAsB,GACAC,QAAAC,IAAAF,EACA,CACA,EAEA7C,YAAAgD,GACA,KAAAC,SAAA,SACAC,MAAAC,IACAH,GAAA,IAEAI,OAAAD,OACA,EAEA3D,aAAAN,GACA,KAAA+D,SAAA,kBACAI,kBAAA,KACAC,iBAAA,KACAX,KAAA,YAEAO,MAAA,UACA,UACA1D,EAAAN,GACA,KAAAqE,SAAAC,QAAA,OACA,OAAAX,GACAC,QAAAC,IAAAF,EACA,SACA,KAAAP,QACA,KAEAc,OAAA,KACA,KAAAG,SAAA,CACAZ,KAAA,OACAlC,QAAA,SACA,GAEA,EAEAM,eACA,KAAA0C,MAAA7C,WAAA8C,UAAA,UACAC,GACA,KAAAV,SAAA,mBACAI,kBAAA,KACAC,iBAAA,KACAX,KAAA,YAEAO,MAAA,UACA,IACA,KAAA7C,OAAA,SAAAA,UAAA,KAAAO,WAAAzB,MAAA,EAAAyE,OAAA,KAAAC,OAAAC,QAAAF,cACAtC,EAAA,KAAAjB,QACA,KAAAkD,SAAAC,QAAA,OACA,OAAAX,GACAC,QAAAC,IAAAF,EACA,SACA,KAAA/B,QACA,KAAAxB,WAAA,YAAAe,QACA,KAAAiC,QACA,KAEAc,OAAA,KACA,KAAAG,SAAA,CACAZ,KAAA,OACAlC,QAAA,OACA,GAEA,GAEA,EAEAK,QACA,KAAAX,eAAA,EACA,KAAAS,WAAA,CAAAD,MAAA,GAAAD,OAAA,GACA,GAEAqD,SAAA,CACAC,QACA,OAAAC,EAAAA,GAAA,KAAAC,OAAAC,OAAAxB,KACA,EACApD,QACA,OAAA0E,EAAAA,GAAA,KAAAC,OAAAC,OAAAxB,KACA,EACAyB,OACA,OAAAH,EAAAA,GAAA,KAAAC,OAAAC,OAAAxB,KACA,EACA0B,SACA,OAAAJ,EAAAA,GAAA,KAAAC,OAAAC,OAAAxB,KACA,EACAzC,SACA,OAAA+D,EAAAA,GAAA,KAAAC,OAAAC,OAAAxB,KACA,EACAvD,QACA,OAAA6E,EAAAA,GAAA,KAAAC,OAAAC,OAAAxB,KACA,EACA7C,cACA,IAAAwE,EAAA,QAEA,MADA,cAAArC,aAAAqC,EAAA,eACAA,CACA,IC3Q8P,I,UCQ1PC,GAAY,OACd,EACArH,EACA8D,GACA,EACA,KACA,WACA,MAIF,EAAeuD,EAAiB,O,uBClBzB,SAASP,EAAMQ,GAClB,MAAMR,EAAS,IACf,OAAOS,EAAaD,EAAIR,EAC5B,CAEO,SAASzE,EAAMiF,GAClB,MAAMjF,EAAS,IACf,OAAOkF,EAAaD,EAAIjF,EAC5B,CAEO,SAAS6E,EAAKI,GACjB,MAAMJ,EAAQ,IACd,OAAOK,EAAaD,EAAIJ,EAC5B,CAEO,SAASC,EAAOG,GACnB,MAAMH,EAAU,IAChB,OAAOI,EAAaD,EAAIH,EAC5B,CAEO,SAASnE,EAAOsE,GACnB,MAAMtE,EAAU,IAChB,OAAOuE,EAAaD,EAAItE,EAC5B,CAEO,SAASd,EAAMoF,GAClB,MAAMpF,EAAS,IACf,OAAOqF,EAAaD,EAAIpF,EAC5B,CACA,SAASqF,EAAaD,EAAIE,GACtB,IAAIC,EAAOH,EAAII,MAAM,IAAIC,QAAOC,IAASC,MAAMD,KAC/C,OAAQH,EAAIK,SAASN,EACzB,C,+KC5BO,SAASO,EAAYT,GAC1B,MAAO,gBAAgBU,KAAKV,EAC9B,CAQO,SAASW,EAAcC,GAC5B,IAAIC,GAAU,EAMd,OALAC,OAAOC,KAAKH,GAAQI,SAAQ,SAASC,GAClB,OAAdL,EAAOK,IAA2B,IAAZL,EAAOK,KAC9BJ,GAAU,EAEd,IACOA,CACT,CAOO,SAAS3D,EAAYgE,GAC1B,MAA+B,OAA5BC,WAAWD,GAAKE,UAKrB,CAOO,SAASC,EAAWH,GACzB,MAAgB,KAARA,GAAsB,OAARA,CACxB,C","sources":["webpack://pc_web/./src/views/repair/index.vue","webpack://pc_web/./src/api/repair.js","webpack://pc_web/src/views/repair/index.vue","webpack://pc_web/./src/views/repair/index.vue?9218","webpack://pc_web/./src/views/repair/index.vue?8ab3","webpack://pc_web/./src/utils/permission.js","webpack://pc_web/./src/utils/validate.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main-container\"},[_vm._m(0),_c('div',{staticClass:\"table-container\"},[_c('div',{staticClass:\"navbar\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"50px\",\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"房号\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入房号\"},model:{value:(_vm.form.houseName),callback:function ($$v) {_vm.$set(_vm.form, \"houseName\", $$v)},expression:\"form.houseName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"时间\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"请选择时间\",\"picker-options\":_vm.pickerBeginOption,\"value-format\":\"yyyy-MM-DD\"},model:{value:(_vm.form.month),callback:function ($$v) {_vm.$set(_vm.form, \"month\", $$v)},expression:\"form.month\"}})],1),_c('el-button',{staticStyle:{\"height\":\"38px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")])],1)],1),_c('div',{staticClass:\"table\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"stripe\":\"\",\"height\":\"454\",\"default-sort\":{ prop: 'date', order: 'descending' }},scopedSlots:_vm._u([{key:\"empty\",fn:function(){return [_c('el-empty',{attrs:{\"image-size\":200}})]},proxy:true}])},[_c('el-table-column',{attrs:{\"prop\":\"report\",\"label\":\"时间\",\"sortable\":\"\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"houseName\",\"label\":\"房号\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"message\",\"label\":\"详情\"}}),_c('el-table-column',{attrs:{\"prop\":\"state\",\"label\":\"状态\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.state == 0)?_c('span',[_vm._v(\"待处理\")]):_c('span',[_vm._v(\"已处理\")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isGet},on:{\"click\":function($event){return _vm.openDrawer(`show`, scope.row)}}},[_vm._v(\"查 看\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\",\"disabled\":_vm.isDel || scope.row.state == `1`},on:{\"click\":function($event){return _vm.deleteRepair(scope.row)}}},[_vm._v(\"取 消\")])]}}])})],1)],1),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.pagination.currentPage,\"page-size\":_vm.pagination.pageSize,\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.pagination.total},on:{\"current-change\":_vm.handleCurrentChange}})],1),_c('div',{staticClass:\"drawer-container\"},[_c('el-drawer',{attrs:{\"title\":_vm.drawerTitle,\"size\":\"35%\",\"visible\":_vm.isShowDrawer,\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.isShowDrawer=$event}}},[_c('div',{staticClass:\"bg\"},[_c('div',{staticClass:\"main\"},[_c('el-descriptions',{attrs:{\"title\":\" 维修信息\",\"column\":2}},[_c('template',{slot:\"extra\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isEdit || _vm.state == `已处理`},on:{\"click\":function($event){_vm.dialogVisible = true}}},[_vm._v(\"确认维修\")])],1),_c('el-descriptions-item',{attrs:{\"label\":\"上报时间\"}},[_vm._v(_vm._s(_vm.repair.report))]),_c('el-descriptions-item',{attrs:{\"label\":\"维修时间\"}},[_vm._v(_vm._s(_vm.repair.fix))]),_c('el-descriptions-item',{attrs:{\"label\":\"房号\"}},[_vm._v(_vm._s(_vm.repair.houseName))]),_c('el-descriptions-item',{attrs:{\"label\":\"维修员\"}},[_vm._v(_vm._s(_vm.repair.name))]),_c('el-descriptions-item',{attrs:{\"label\":\"详情\"}},[_vm._v(_vm._s(_vm.repair.message))]),_c('el-descriptions-item',{attrs:{\"label\":\"维修信息\"}},[_vm._v(_vm._s(_vm.repair.remark))]),_c('el-descriptions-item',{attrs:{\"label\":\"状态\"}},[_vm._v(_vm._s(_vm.state))]),_c('el-descriptions-item',{attrs:{\"label\":\"维修金额\"}},[_vm._v(_vm._s(_vm.repair.price))])],2)],1)])])],1),_c('div',{staticClass:\"dialog\"},[_c('el-dialog',{attrs:{\"title\":\"填写维修信息\",\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"repairForm\",attrs:{\"model\":_vm.repairForm,\"label-width\":\"100x\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"维修金额\",\"prop\":\"price\"}},[_c('el-input',{model:{value:(_vm.repairForm.price),callback:function ($$v) {_vm.$set(_vm.repairForm, \"price\", $$v)},expression:\"repairForm.price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"维修信息\",\"prop\":\"remark\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.repairForm.remark),callback:function ($$v) {_vm.$set(_vm.repairForm, \"remark\", $$v)},expression:\"repairForm.remark\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.reset}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleRepair()}}},[_vm._v(\"确 定\")])],1)],1)],1)])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"header-container\"},[_c('h1',[_vm._v(\"维 修 管 理\")])])\n}]\n\nexport { render, staticRenderFns }","import { post, get } from '@/utils/request';\r\n\r\n/**\r\n * 获取全部维修信息\r\n * @param {*} param\r\n * @param {*} obj\r\n * @returns\r\n */\r\nexport function getAllRepair(param, obj) {\r\n  return get(`getAllRepair/${param}`, obj);\r\n}\r\n\r\n/**\r\n * 删除维修\r\n * @param {*} param\r\n * @returns\r\n */\r\nexport function deleteRepair(param) {\r\n  return get(`deleteRepair`, param);\r\n}\r\n\r\n/**\r\n * 获取详细维修信息\r\n * @param {*} param\r\n * @returns\r\n */\r\nexport function getRepairByRepairId(param) {\r\n  return get(`getRepairByRepairId`, param);\r\n}\r\n\r\n/**\r\n * 完成维修\r\n */\r\nexport function completeRepair(param) {\r\n  return get(`completeRepair`, param);\r\n}\r\n","<template>\r\n  <div class=\"main-container\">\r\n    <div class=\"header-container\">\r\n      <h1>维 修 管 理</h1>\r\n    </div>\r\n    <div class=\"table-container\">\r\n      <div class=\"navbar\">\r\n        <el-form ref=\"form\" :model=\"form\" label-width=\"50px\" :inline=\"true\">\r\n          <el-form-item label=\"房号\">\r\n            <el-input v-model=\"form.houseName\" placeholder=\"请输入房号\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"时间\">\r\n            <el-date-picker v-model=\"form.month\" type=\"date\" placeholder=\"请选择时间\" :picker-options=\"pickerBeginOption\" value-format=\"yyyy-MM-DD\"> </el-date-picker>\r\n          </el-form-item>\r\n          <el-button type=\"primary\" style=\"height: 38px\" @click=\"search\">查询</el-button>\r\n        </el-form>\r\n      </div>\r\n      <div class=\"table\">\r\n        <el-table :data=\"tableData\" stripe style=\"width: 100%\" height=\"454\" :default-sort=\"{ prop: 'date', order: 'descending' }\">\r\n          <el-table-column prop=\"report\" label=\"时间\" sortable width=\"180\"> </el-table-column>\r\n          <el-table-column prop=\"houseName\" label=\"房号\" width=\"180\"> </el-table-column>\r\n          <el-table-column prop=\"message\" label=\"详情\"> </el-table-column>\r\n          <el-table-column prop=\"state\" label=\"状态\" width=\"100\">\r\n            <template slot-scope=\"scope\">\r\n              <span v-if=\"scope.row.state == 0\">待处理</span>\r\n              <span v-else>已处理</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"primary\" size=\"small\" :disabled=\"isGet\" @click=\"openDrawer(`show`, scope.row)\">查 看</el-button>\r\n              <el-button type=\"danger\" size=\"small\" :disabled=\"isDel || scope.row.state == `1`\" @click=\"deleteRepair(scope.row)\">取 消</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <template #empty>\r\n            <el-empty :image-size=\"200\"></el-empty>\r\n          </template>\r\n        </el-table>\r\n      </div>\r\n      <div class=\"pagination\">\r\n        <el-pagination @current-change=\"handleCurrentChange\" :current-page=\"pagination.currentPage\" :page-size=\"pagination.pageSize\" background layout=\"prev, pager, next\" :total=\"pagination.total\"> </el-pagination>\r\n      </div>\r\n      <div class=\"drawer-container\">\r\n        <el-drawer :title=\"drawerTitle\" size=\"35%\" :visible.sync=\"isShowDrawer\" :before-close=\"handleClose\">\r\n          <div class=\"bg\">\r\n            <div class=\"main\">\r\n              <el-descriptions title=\" 维修信息\" :column=\"2\">\r\n                <template slot=\"extra\">\r\n                  <el-button type=\"primary\" size=\"small\" :disabled=\"isEdit || state == `已处理`\" @click=\"dialogVisible = true\">确认维修</el-button>\r\n                </template>\r\n                <el-descriptions-item label=\"上报时间\">{{ repair.report }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"维修时间\">{{ repair.fix }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"房号\">{{ repair.houseName }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"维修员\">{{ repair.name }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"详情\">{{ repair.message }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"维修信息\">{{ repair.remark }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"状态\">{{ state }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"维修金额\">{{ repair.price }}</el-descriptions-item>\r\n              </el-descriptions>\r\n            </div>\r\n          </div>\r\n        </el-drawer>\r\n      </div>\r\n      <div class=\"dialog\">\r\n        <el-dialog title=\"填写维修信息\" :visible.sync=\"dialogVisible\" width=\"30%\" :before-close=\"handleClose\">\r\n          <el-form :model=\"repairForm\" label-width=\"100x\" :rules=\"rules\" ref=\"repairForm\">\r\n            <el-form-item label=\"维修金额\" prop=\"price\">\r\n              <el-input v-model=\"repairForm.price\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"维修信息\" prop=\"remark\">\r\n              <el-input type=\"textarea\" v-model=\"repairForm.remark\"></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n          <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"reset\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"handleRepair()\">确 定</el-button>\r\n          </span>\r\n        </el-dialog>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as permission from '@/utils/permission';\r\nimport { getAllRepair, deleteRepair, getRepairByRepairId, completeRepair } from '@/api/repair';\r\nimport { validNumber } from '@/utils/validate';\r\nexport default {\r\n  data() {\r\n    const validateNumber = (rule, value, callback) => {\r\n      validNumber(value) ? callback() : callback(new Error('请输入数字'));\r\n    };\r\n    return {\r\n      pickerBeginOption: {\r\n        disabledDate: time => {\r\n          return time.getTime() > Date.now();\r\n        }\r\n      },\r\n      form: {\r\n        month: '',\r\n        houseName: ''\r\n      },\r\n      tableData: [],\r\n      pagination: {\r\n        currentPage: 1, //当前页码\r\n        pageSize: 7, //每页显示的记录数\r\n        total: 0\r\n      },\r\n      isShowDrawer: false,\r\n      drawerType: '',\r\n      repair: {},\r\n      state: '',\r\n      dialogVisible: false,\r\n      repairForm: {\r\n        price: '',\r\n        remark: ''\r\n      },\r\n      rules: {\r\n        price: [\r\n          { required: true, message: '请输入维修金额', trigger: 'blur' },\r\n          {\r\n            validator: validateNumber,\r\n            message: '维修金额必须为数字值',\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        remark: [{ required: true, message: '请填写维修信息', trigger: 'blur' }]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.getAll();\r\n  },\r\n  methods: {\r\n    //获取全部维修记录\r\n    async getAll() {\r\n      const param = `${this.pagination.currentPage}/${this.pagination.pageSize}`;\r\n      const { data } = await getAllRepair(param, {\r\n        houseName: this.form.houseName,\r\n        report: this.form.month\r\n      });\r\n      this.tableData = data.records;\r\n      this.pagination.currentPage = data.current;\r\n      this.pagination.total = data.total;\r\n      this.pagination.pageSize = data.size;\r\n      // console.log(data);\r\n    },\r\n    //换页\r\n    handleCurrentChange(currentPage) {\r\n      this.pagination.currentPage = currentPage;\r\n      this.getAll();\r\n    },\r\n    //查询\r\n    search() {\r\n      this.getAll();\r\n      this.form = {};\r\n    },\r\n    //打开抽屉\r\n    async openDrawer(type, row) {\r\n      try {\r\n        this.isShowDrawer = true;\r\n        this.drawerType = type;\r\n        if (row.state == 0) {\r\n          this.state = '待处理';\r\n          this.repair = row;\r\n        } else {\r\n          this.state = '已处理';\r\n          const { data } = await getRepairByRepairId({ repairId: row.repairId });\r\n          this.repair = data;\r\n        }\r\n        // console.log(this.repair);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    //关闭提醒\r\n    handleClose(done) {\r\n      this.$confirm('确认关闭？')\r\n        .then(_ => {\r\n          done();\r\n        })\r\n        .catch(_ => {});\r\n    },\r\n    //取消维修\r\n    deleteRepair(row) {\r\n      this.$confirm('确定要取消维修吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(async () => {\r\n          try {\r\n            await deleteRepair(row);\r\n            this.$message.success('取消成功');\r\n          } catch (error) {\r\n            console.log(error);\r\n          } finally {\r\n            this.getAll();\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });\r\n        });\r\n    },\r\n    //处理维修\r\n    handleRepair() {\r\n      this.$refs.repairForm.validate(async isOK => {\r\n        if (isOK) {\r\n          this.$confirm('确定已处理维修了吗?', '提示', {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          })\r\n            .then(async () => {\r\n              try {\r\n                this.repair = { ...this.repair, ...this.repairForm, state: 1, userId: this.$store.getters.userId };\r\n                await completeRepair(this.repair);\r\n                this.$message.success('处理完成');\r\n              } catch (error) {\r\n                console.log(error);\r\n              } finally {\r\n                this.reset();\r\n                this.openDrawer(`show`, this.repair);\r\n                this.getAll();\r\n              }\r\n            })\r\n            .catch(() => {\r\n              this.$message({\r\n                type: 'info',\r\n                message: '已取消'\r\n              });\r\n            });\r\n        }\r\n      });\r\n    },\r\n    //取消\r\n    reset() {\r\n      this.dialogVisible = false;\r\n      this.repairForm = { price: '', remark: '' };\r\n    }\r\n  },\r\n  computed: {\r\n    isAdd() {\r\n      return permission.isAdd(this.$route.params.type);\r\n    },\r\n    isDel() {\r\n      return permission.isDel(this.$route.params.type);\r\n    },\r\n    isUp() {\r\n      return permission.isUp(this.$route.params.type);\r\n    },\r\n    isPull() {\r\n      return permission.isPull(this.$route.params.type);\r\n    },\r\n    isEdit() {\r\n      return permission.isEdit(this.$route.params.type);\r\n    },\r\n    isGet() {\r\n      return permission.isGet(this.$route.params.type);\r\n    },\r\n    drawerTitle() {\r\n      let title = '默认大标题';\r\n      if (this.drawerType === 'show') title = '查 看 维 修 信 息';\r\n      return title;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.main-container {\r\n  .header-container {\r\n    display: flex;\r\n    justify-content: space-between;\r\n\r\n    h1 {\r\n      font-size: 24px;\r\n      line-height: 40px;\r\n      color: #3a3f63;\r\n      font-weight: 400;\r\n    }\r\n    .add {\r\n      width: 100px;\r\n      height: 42px;\r\n      border-radius: 27px;\r\n      background: linear-gradient(45deg, #4f8aff 0%, #4b5eff 100%);\r\n      background-blend-mode: normal;\r\n      box-shadow: 0px 4px 16px #b3c0e7;\r\n      color: #fff;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n  .table-container {\r\n    height: 649px;\r\n    width: 100%;\r\n    margin-top: 25px;\r\n    background-color: #fff;\r\n    border-radius: 8px;\r\n    padding: 25px;\r\n    .navbar {\r\n      margin-top: 10px;\r\n      height: 70px;\r\n      width: 100%;\r\n      border-bottom: 1px solid #e6e9f4;\r\n      ::v-deep .el-form {\r\n        .el-form-item__label {\r\n          font-size: 14px !important;\r\n          padding: 0 15px 0 0 !important;\r\n          color: #6a74a5;\r\n          font-weight: 700;\r\n        }\r\n\r\n        .el-input__inner {\r\n          width: 180px;\r\n          height: 35px;\r\n          border: 1px solid #ccc;\r\n          color: #606266;\r\n          text-align: left;\r\n\r\n          &:hover {\r\n            border: 1px solid #ccc;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .pagination {\r\n      margin-top: 15px;\r\n    }\r\n  }\r\n  .drawer-container {\r\n    .bg {\r\n      width: 100%;\r\n      padding: 0 25px 0 25px;\r\n      .main {\r\n        padding: 10px;\r\n        box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n      }\r\n    }\r\n  }\r\n  .dialog {\r\n    ::v-deep .el-form {\r\n      padding: 0 30px 0 20px;\r\n\r\n      .el-form-item {\r\n        margin-bottom: 20px;\r\n      }\r\n\r\n      .el-form-item__label {\r\n        font-size: 14px !important;\r\n        padding: 0 15px 0 0 !important;\r\n      }\r\n\r\n      .el-input__inner,\r\n      .el-textarea__inner {\r\n        border: 1px solid #ccc;\r\n        color: #606266;\r\n\r\n        &:hover {\r\n          border: 1px solid #ccc;\r\n        }\r\n\r\n        &::placeholder {\r\n          font-size: 14px;\r\n          color: #606266;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=88167cc2&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=88167cc2&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"88167cc2\",\n  null\n  \n)\n\nexport default component.exports","//添加\r\nexport function isAdd(str){\r\n    const isAdd = `1`\r\n    return handleParams(str,isAdd)\r\n}\r\n//删除\r\nexport function isDel(str){\r\n    const isDel = `2`\r\n    return handleParams(str,isDel)\r\n}\r\n//上架\r\nexport function isUp(str){\r\n    const isUp = `3`\r\n    return handleParams(str,isUp)\r\n}\r\n//下架\r\nexport function isPull(str){\r\n    const isPull = `4`\r\n    return handleParams(str,isPull)\r\n}\r\n//编辑\r\nexport function isEdit(str){\r\n    const isEdit = `5`\r\n    return handleParams(str,isEdit)\r\n}\r\n//查看\r\nexport function isGet(str){\r\n    const isGet = `6`\r\n    return handleParams(str,isGet)\r\n}\r\nfunction handleParams(str,index){\r\n    let arr =  str.split('').filter(item => !isNaN(item))\r\n    return !arr.includes(index)\r\n}","/**\r\n * 校检手机号\r\n * @param {*} str\r\n * @returns\r\n */\r\nexport function validMobile(str) {\r\n  return /^1[3-9]\\d{9}$/.test(str);\r\n}\r\n\r\n\r\n/**\r\n * 判断对象是否全为空\r\n * @param {*} object \r\n * @returns \r\n */\r\nexport function valueAllEmpty(object){\r\n  let isEmpty = true;\r\n  Object.keys(object).forEach(function(x){\r\n    if(object[x] !== null && object[x] !=\"\"){\r\n      isEmpty = false;\r\n    }\r\n  })\r\n  return isEmpty\r\n}\r\n\r\n/**\r\n * 校验数字\r\n * @param {*} val \r\n * @returns \r\n */\r\nexport function validNumber(val){\r\n  if(parseFloat(val).toString()==\"NaN\"){\r\n    return false;\r\n  }else{\r\n    return true;\r\n  }\r\n}\r\n\r\n/**\r\n * 判断是否为空\r\n * @param {*} val \r\n * @returns \r\n */\r\nexport function validEmpty(val){\r\n  return (val === \"\" || val === null) ? true :false\r\n}\r\n"],"names":["render","_vm","this","_c","_self","staticClass","_m","ref","attrs","form","model","value","houseName","callback","$$v","$set","expression","pickerBeginOption","month","staticStyle","on","search","_v","tableData","prop","order","scopedSlots","_u","key","fn","proxy","scope","row","state","isGet","$event","openDrawer","isDel","deleteRepair","pagination","currentPage","pageSize","total","handleCurrentChange","drawerTitle","isShowDrawer","handleClose","slot","isEdit","dialogVisible","_s","repair","report","fix","name","message","remark","price","repairForm","rules","reset","handleRepair","staticRenderFns","getAllRepair","param","obj","get","getRepairByRepairId","completeRepair","data","validateNumber","rule","validNumber","Error","disabledDate","time","getTime","Date","now","drawerType","required","trigger","validator","created","getAll","methods","records","current","size","type","repairId","error","console","log","done","$confirm","then","_","catch","confirmButtonText","cancelButtonText","$message","success","$refs","validate","isOK","userId","$store","getters","computed","isAdd","permission","$route","params","isUp","isPull","title","component","str","handleParams","index","arr","split","filter","item","isNaN","includes","validMobile","test","valueAllEmpty","object","isEmpty","Object","keys","forEach","x","val","parseFloat","toString","validEmpty"],"sourceRoot":""}