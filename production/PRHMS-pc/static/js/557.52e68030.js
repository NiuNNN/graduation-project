"use strict";(self["webpackChunkpc_web"]=self["webpackChunkpc_web"]||[]).push([[557],{6557:function(t,e,r){r.r(e),r.d(e,{default:function(){return m}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container"},[e("div",{staticClass:"header-container"},[e("h1",[t._v("薪 水 管 理")]),e("el-button",{staticClass:"add",attrs:{disabled:t.isAdd},on:{click:function(e){return t.openDrawer("add")}}},[t._v("添 加 +")])],1),e("div",{staticClass:"table-container"},[e("div",{staticClass:"table"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},scopedSlots:t._u([{key:"empty",fn:function(){return[e("el-empty",{attrs:{"image-size":200}})]},proxy:!0}])},[e("el-table-column",{attrs:{prop:"salaryName",label:"薪水名称",width:"120"}}),e("el-table-column",{attrs:{prop:"price",label:"薪水(元)",width:"120"}}),e("el-table-column",{attrs:{prop:"remark",label:"详情"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-button",{attrs:{type:"primary",size:"mini",disabled:t.isEdit},on:{click:function(e){return t.openDrawer("edit",r.row)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"danger",size:"mini",disabled:t.isDel},on:{click:function(e){return t.deleteSalary(r.row)}}},[t._v("删除")])]}}])})],1)],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,background:"",layout:"prev, pager, next",total:t.pagination.total},on:{"current-change":t.handleCurrentChange}})],1),e("div",{staticClass:"drawer"},[e("el-drawer",{attrs:{title:t.drawerTitle,size:"28%",visible:t.isShowDrawer,"before-close":t.handleClose},on:{"update:visible":function(e){t.isShowDrawer=e}}},[e("el-form",{ref:"salaryForm",attrs:{model:t.salaryForm,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"薪水名称",prop:"salaryName"}},[e("el-input",{attrs:{placeholder:"请输入薪水名称"},model:{value:t.salaryForm.salaryName,callback:function(e){t.$set(t.salaryForm,"salaryName","string"===typeof e?e.trim():e)},expression:"salaryForm.salaryName"}})],1),e("el-form-item",{attrs:{label:"薪水(元)",prop:"price"}},[e("el-input",{attrs:{placeholder:"请输入薪水"},model:{value:t.salaryForm.price,callback:function(e){t.$set(t.salaryForm,"price","string"===typeof e?e.trim():e)},expression:"salaryForm.price"}})],1),e("el-form-item",{attrs:{label:"薪水对象",prop:"state"}},[e("el-radio-group",{model:{value:t.salaryForm.state,callback:function(e){t.$set(t.salaryForm,"state",e)},expression:"salaryForm.state"}},[e("el-radio",{attrs:{label:"1"}},[t._v("正式")]),e("el-radio",{attrs:{label:"2"}},[t._v("试用期")]),e("el-radio",{attrs:{label:"3"}},[t._v("其他")])],1)],1),e("el-form-item",{attrs:{label:"立即生效",prop:"operation"}},[e("el-radio-group",{model:{value:t.salaryForm.operation,callback:function(e){t.$set(t.salaryForm,"operation",e)},expression:"salaryForm.operation"}},[e("el-radio",{attrs:{label:"0"}},[t._v("否")]),e("el-radio",{attrs:{label:"1"}},[t._v("是")])],1)],1),e("el-form-item",{attrs:{label:"详情",prop:"remark"}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:20},placeholder:"请输入该薪水详情"},model:{value:t.salaryForm.remark,callback:function(e){t.$set(t.salaryForm,"remark",e)},expression:"salaryForm.remark"}})],1),e("el-form-item",[e("span",{staticStyle:{"font-size":"10px",color:"#ff2855"}},[t._v("*默认不立即生效为下一个月生效")]),e("div",[e("el-button",{attrs:{type:"primary",disabled:t.isAdd},on:{click:t.submit}},[t._v("确 认")]),e("el-button",{on:{click:function(e){t.isShowDrawer=!1}}},[t._v("取 消")])],1)])],1)],1)],1)])])},n=[],i=r(4828),s=r(6585),l=r(9176),o=r(2900),u={data(){const t=(t,e,r)=>{(0,l.BP)(e)?r():r(new Error("请输入数字"))};return{pagination:{currentPage:1,pageSize:8,total:0},tableData:[],isShowDrawer:!1,drawerType:"",salaryForm:{salaryName:"",price:"",remark:"",operation:"0",state:"1"},rules:{salaryName:[{required:!0,message:"请输入收费名称",trigger:"blur"}],price:[{required:!0,message:"请输入收费价格",trigger:"blur"},{validator:t,message:"价格必须为数字值",trigger:"blur"}],operation:[{required:!0,message:"请选择是否立即生效",trigger:"blur"}],remark:[{required:!0,message:"请输入该收费详情",trigger:"blur"}],state:[{required:!0,message:"请选择薪水区别",trigger:"blur"}]}}},created(){this.getAllSalary()},methods:{async getAllSalary(){try{const t=`${this.pagination.currentPage}/${this.pagination.pageSize}`,{data:e}=await(0,i.wO)(t);this.tableData=e.records,this.pagination.currentPage=e.current,this.pagination.total=e.total,this.pagination.pageSize=e.size}catch(t){console.log(t)}},handleCurrentChange(t){this.pagination.currentPage=t,this.getAllSalary()},handleClose(t){this.$confirm("确认关闭？").then((e=>{t()})).catch((t=>{}))},openDrawer(t,e){this.reset(),this.drawerType=t,this.isShowDrawer=!0,"edit"===this.drawerType&&(this.salaryForm={salaryName:e.salaryName,price:e.price,remark:e.remark,operation:e.operation,salaryId:e.salaryId,state:""+e.state})},async submit(){try{await this.$refs.salaryForm.validate(),"add"===this.drawerType&&(await(0,i.tA)(this.salaryForm),this.$message.success("添加成功")),"edit"===this.drawerType&&(await(0,i.qY)(this.salaryForm),this.$message.success("修改成功"))}catch(t){console.log(t)}finally{this.getAllSalary(),this.reset(),this.isShowDrawer=!1}},reset(){this.salaryForm={salaryName:"",price:"",remark:"",operation:"0",state:"1"}},deleteSalary(t){this.$prompt("请输入密码","删除该收费",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password",inputPattern:/^\w{5,12}$/,inputErrorMessage:"密码格式不正确"}).then((async({value:e})=>{try{console.log(e),await(0,o.uo)({password:e,username:this.$store.getters.username}),await(0,i.XH)({salaryId:t.salaryId}),this.$message.success("删除成功")}catch(r){console.log(r)}finally{this.getAllSalary()}})).catch((()=>{this.$message({type:"info",message:"取消输入"})}))}},computed:{drawerTitle(){let t="默认大标题";return"add"===this.drawerType&&(t="添 加 薪 水"),"edit"===this.drawerType&&(t="修 改 薪 水"),t},isAdd(){return s.kL(this.$route.params.type)},isDel(){return s.bK(this.$route.params.type)},isUp(){return s.EN(this.$route.params.type)},isPull(){return s.kX(this.$route.params.type)},isEdit(){return s.mi(this.$route.params.type)},isGet(){return s.Xu(this.$route.params.type)}}},c=u,p=r(1001),d=(0,p.Z)(c,a,n,!1,null,"0a7cd1b4",null),m=d.exports},4828:function(t,e,r){r.d(e,{Cd:function(){return u},MS:function(){return p},S2:function(){return o},XH:function(){return l},aP:function(){return c},oR:function(){return m},qY:function(){return s},tA:function(){return i},wO:function(){return n},yg:function(){return d}});var a=r(9312);function n(t){return(0,a.U2)(`getAllSalary/${t}`,{})}function i(t){return(0,a.v_)("insertSalary",t)}function s(t){return(0,a.v_)("updateSalary",t)}function l(t){return(0,a.U2)("deleteSalary",t)}function o(t){return(0,a.U2)("getSalaryMap",t)}function u(t,e){return(0,a.U2)(`selectSalaryPay/${t}`,e)}function c(t){return(0,a.Ab)("generateStaffExcel",t)}function p(){return(0,a.Ab)("generateStaffSalary",{})}function d(){return(0,a.U2)("judgeGenerateStaff",{})}function m(t){return(0,a.U2)("getUserSalaryByUserId",t)}},6585:function(t,e,r){function a(t){const e="1";return u(t,e)}function n(t){const e="2";return u(t,e)}function i(t){const e="3";return u(t,e)}function s(t){const e="4";return u(t,e)}function l(t){const e="5";return u(t,e)}function o(t){const e="6";return u(t,e)}function u(t,e){let r=t.split("").filter((t=>!isNaN(t)));return!r.includes(e)}r.d(e,{EN:function(){return i},Xu:function(){return o},bK:function(){return n},kL:function(){return a},kX:function(){return s},mi:function(){return l}})},9176:function(t,e,r){function a(t){return/^1[3-9]\d{9}$/.test(t)}function n(t){let e=!0;return Object.keys(t).forEach((function(r){null!==t[r]&&""!=t[r]&&(e=!1)})),e}function i(t){return"NaN"!=parseFloat(t).toString()}function s(t){return""===t||null===t}r.d(e,{BP:function(){return i},Lp:function(){return a},kz:function(){return n},n3:function(){return s}})}}]);
//# sourceMappingURL=557.52e68030.js.map