"use strict";(self["webpackChunkh5_web"]=self["webpackChunkh5_web"]||[]).push([[379],{48:function(t,e,s){s.d(e,{Z:function(){return o}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("van-nav-bar",{attrs:{title:t.title,"left-text":"返回","left-arrow":""},on:{"click-left":function(e){return t.goBack()}},scopedSlots:t._u([{key:"right",fn:function(){return[t._t("default")]},proxy:!0}],null,!0)})],1)},a=[],r={props:{title:{type:String,default:"标题"}},methods:{goBack(){this.$router.go(-1)}}},i=r,c=s(1001),l=(0,c.Z)(i,n,a,!1,null,"b51246ea",null),o=l.exports},3379:function(t,e,s){s.r(e),s.d(e,{default:function(){return v}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"header"},[e("Header",{attrs:{title:"杂费信息"}})],1),e("div",{staticClass:"main"},[e("div",{staticClass:"cell"},[e("p",{staticClass:"nav"},[t._v("已添加杂费:")]),t._l(t.hasMis,(function(s,n){return e("van-swipe-cell",{key:n,scopedSlots:t._u([{key:"right",fn:function(){return[e("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除",type:"danger"},on:{click:function(e){return t.remove(s.miscellaneousId)}}})]},proxy:!0}],null,!0)},[e("van-cell",{attrs:{title:s.baseName},scopedSlots:t._u([{key:"label",fn:function(){return[e("p",[t._v("价格："+t._s(s.price))]),e("p",[t._v("说明："+t._s(s.remark))])]},proxy:!0}],null,!0)})],1)}))],2),e("div",{staticClass:"cell"},[e("p",{staticClass:"nav"},[t._v("未添加杂费:")]),t._l(t.noMis,(function(s,n){return e("van-swipe-cell",{key:n,scopedSlots:t._u([{key:"right",fn:function(){return[e("van-button",{staticClass:"primary-button",attrs:{square:"",text:"添加",type:"primary"},on:{click:function(e){return t.add(s.baseId)}}})]},proxy:!0}],null,!0)},[e("van-cell",{attrs:{title:s.baseName},scopedSlots:t._u([{key:"label",fn:function(){return[e("p",[t._v("价格："+t._s(s.price))]),e("p",[t._v("说明："+t._s(s.remark))])]},proxy:!0}],null,!0)})],1)}))],2)])])},a=[],r=s(48),i=s(6361);function c(t){return(0,i.U2)("getBasicByUserId",t)}function l(t){return(0,i.U2)("getNoBasicByRentId",t)}function o(t){return(0,i.U2)("insertMiscellaneous",t)}function u(t){return(0,i.U2)("changeMiscellaneousState",t)}var d=s(5210),f={components:{Header:r.Z},data(){return{hasMis:{},rent:{},noMis:{}}},created(){this.reset()},methods:{async getBasicByUserId(){try{const{data:t}=await c({userId:this.$store.getters.userId});this.hasMis=t}catch(t){console.log(t)}},async getNoBasic(){try{const t=await(0,d.l)({userId:this.$store.getters.userId});this.rent=t.data;const{data:e}=await l({rentId:this.rent.rentId});this.noMis=e}catch(t){console.log(t)}},add(t){this.$dialog.confirm({title:"添加杂费",message:"添加后立即生效，并参与本月结算"}).then((async()=>{try{await o({rentId:this.rent.rentId,baseId:t}),this.$toast.success("添加成功")}catch(e){console.log(e)}finally{this.reset()}}))},remove(t){this.$dialog.confirm({title:"删除杂费",message:"删除后该月可使用，下月将使用将重新计算"}).then((async()=>{try{await u({state:2,miscellaneousId:t}),this.$toast.success("删除成功")}catch(e){console.log(e)}finally{this.reset()}}))},async reset(){this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0}),await this.getBasicByUserId(),await this.getNoBasic(),this.$toast.clear()}}},h=f,p=s(1001),y=(0,p.Z)(h,n,a,!1,null,"0a056683",null),v=y.exports},5210:function(t,e,s){s.d(e,{l:function(){return a}});var n=s(6361);function a(t){return(0,n.U2)("getRentIdByUserId",t)}}}]);
//# sourceMappingURL=379.e982351a.js.map