{"version":3,"file":"static/js/379.e982351a.js","mappings":"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","sources":["webpack://h5_web/./src/components/utils/HeaderVue.vue","webpack://h5_web/src/components/utils/HeaderVue.vue","webpack://h5_web/./src/components/utils/HeaderVue.vue?3777","webpack://h5_web/./src/components/utils/HeaderVue.vue?bb6a","webpack://h5_web/./src/views/miscellanous/index.vue","webpack://h5_web/./src/api/basic.js","webpack://h5_web/src/views/miscellanous/index.vue","webpack://h5_web/./src/views/miscellanous/index.vue?8292","webpack://h5_web/./src/views/miscellanous/index.vue?f251","webpack://h5_web/./src/api/rent.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('van-nav-bar',{attrs:{\"title\":_vm.title,\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.goBack()}},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_vm._t(\"default\")]},proxy:true}],null,true)})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <van-nav-bar :title=\"title\" left-text=\"返回\" left-arrow @click-left=\"goBack()\">\r\n      <template #right>\r\n        <slot></slot>\r\n      </template>\r\n    </van-nav-bar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: '标题'\r\n    }\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      this.$router.go(-1);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  height: 60px;\r\n  /deep/.van-nav-bar__content {\r\n    height: 60px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HeaderVue.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HeaderVue.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HeaderVue.vue?vue&type=template&id=b51246ea&scoped=true&\"\nimport script from \"./HeaderVue.vue?vue&type=script&lang=js&\"\nexport * from \"./HeaderVue.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HeaderVue.vue?vue&type=style&index=0&id=b51246ea&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b51246ea\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"header\"},[_c('Header',{attrs:{\"title\":\"杂费信息\"}})],1),_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"cell\"},[_c('p',{staticClass:\"nav\"},[_vm._v(\"已添加杂费:\")]),_vm._l((_vm.hasMis),function(item,index){return _c('van-swipe-cell',{key:index,scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-button',{staticClass:\"delete-button\",attrs:{\"square\":\"\",\"text\":\"删除\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.remove(item.miscellaneousId)}}})]},proxy:true}],null,true)},[_c('van-cell',{attrs:{\"title\":item.baseName},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_c('p',[_vm._v(\"价格：\"+_vm._s(item.price))]),_c('p',[_vm._v(\"说明：\"+_vm._s(item.remark))])]},proxy:true}],null,true)})],1)})],2),_c('div',{staticClass:\"cell\"},[_c('p',{staticClass:\"nav\"},[_vm._v(\"未添加杂费:\")]),_vm._l((_vm.noMis),function(item,index){return _c('van-swipe-cell',{key:index,scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-button',{staticClass:\"primary-button\",attrs:{\"square\":\"\",\"text\":\"添加\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.add(item.baseId)}}})]},proxy:true}],null,true)},[_c('van-cell',{attrs:{\"title\":item.baseName},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_c('p',[_vm._v(\"价格：\"+_vm._s(item.price))]),_c('p',[_vm._v(\"说明：\"+_vm._s(item.remark))])]},proxy:true}],null,true)})],1)})],2)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { post, get, postFile } from \"@/utils/request\";\r\n\r\n/**\r\n * 获取用户杂费信息\r\n * @param {*} param\r\n * @returns\r\n */\r\nexport function getBasicByUserId(param) {\r\n  return get(`getBasicByUserId`, param);\r\n}\r\n\r\n/**\r\n * 获取没有添加的杂费信息\r\n * @param {*} param\r\n * @returns\r\n */\r\nexport function getNoBasic(param) {\r\n  return get(`getNoBasicByRentId`, param);\r\n}\r\n\r\n/**\r\n * 添加杂费\r\n * @param {*} param\r\n * @returns\r\n */\r\nexport function insertMiscellaneous(param) {\r\n  return get(`insertMiscellaneous`, param);\r\n}\r\n\r\n/**\r\n * 改变杂费状态\r\n * @param {*} param\r\n * @returns\r\n */\r\nexport function changeMiscellaneousState(param) {\r\n  return get(`changeMiscellaneousState`, param);\r\n}\r\n","<template>\r\n  <div class=\"container\">\r\n    <div class=\"header\">\r\n      <Header title=\"杂费信息\"></Header>\r\n    </div>\r\n    <div class=\"main\">\r\n      <div class=\"cell\">\r\n        <p class=\"nav\">已添加杂费:</p>\r\n        <van-swipe-cell v-for=\"(item, index) in hasMis\" :key=\"index\">\r\n          <van-cell :title=\"item.baseName\">\r\n            <template #label>\r\n              <p>价格：{{ item.price }}</p>\r\n              <p>说明：{{ item.remark }}</p>\r\n            </template>\r\n          </van-cell>\r\n          <template #right>\r\n            <van-button square text=\"删除\" type=\"danger\" class=\"delete-button\" @click=\"remove(item.miscellaneousId)\" />\r\n          </template>\r\n        </van-swipe-cell>\r\n      </div>\r\n      <div class=\"cell\">\r\n        <p class=\"nav\">未添加杂费:</p>\r\n        <van-swipe-cell v-for=\"(item, index) in noMis\" :key=\"index\">\r\n          <van-cell :title=\"item.baseName\">\r\n            <template #label>\r\n              <p>价格：{{ item.price }}</p>\r\n              <p>说明：{{ item.remark }}</p>\r\n            </template>\r\n          </van-cell>\r\n          <template #right>\r\n            <van-button square text=\"添加\" type=\"primary\" class=\"primary-button\" @click=\"add(item.baseId)\" />\r\n          </template>\r\n        </van-swipe-cell>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Header from '@/components/utils/HeaderVue.vue';\r\nimport { getBasicByUserId, getNoBasic, insertMiscellaneous, changeMiscellaneousState } from '@/api/basic';\r\nimport { getRentIdByUserId } from '@/api/rent';\r\nexport default {\r\n  components: {\r\n    Header\r\n  },\r\n  data() {\r\n    return {\r\n      hasMis: {},\r\n      rent: {},\r\n      noMis: {}\r\n    };\r\n  },\r\n  created() {\r\n    this.reset();\r\n  },\r\n  methods: {\r\n    //获取已添加杂费\r\n    async getBasicByUserId() {\r\n      try {\r\n        const { data } = await getBasicByUserId({\r\n          userId: this.$store.getters.userId\r\n        });\r\n        this.hasMis = data;\r\n        // console.log(data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    //获取没有添加的杂费\r\n    async getNoBasic() {\r\n      try {\r\n        const res = await getRentIdByUserId({\r\n          userId: this.$store.getters.userId\r\n        });\r\n        this.rent = res.data;\r\n        // console.log(this.rent);\r\n        const { data } = await getNoBasic({ rentId: this.rent.rentId });\r\n        this.noMis = data;\r\n        // console.log(data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    //添加\r\n    add(val) {\r\n      // console.log(val);\r\n      this.$dialog\r\n        .confirm({\r\n          title: '添加杂费',\r\n          message: '添加后立即生效，并参与本月结算'\r\n        })\r\n        .then(async () => {\r\n          try {\r\n            await insertMiscellaneous({\r\n              rentId: this.rent.rentId,\r\n              baseId: val\r\n            });\r\n            this.$toast.success('添加成功');\r\n          } catch (error) {\r\n            console.log(error);\r\n          } finally {\r\n            this.reset();\r\n          }\r\n        });\r\n    },\r\n    //删除\r\n    remove(val) {\r\n      // console.log(val);\r\n      this.$dialog\r\n        .confirm({\r\n          title: '删除杂费',\r\n          message: '删除后该月可使用，下月将使用将重新计算'\r\n        })\r\n        .then(async () => {\r\n          try {\r\n            await changeMiscellaneousState({\r\n              state: 2,\r\n              miscellaneousId: val\r\n            });\r\n            this.$toast.success('删除成功');\r\n          } catch (error) {\r\n            console.log(error);\r\n          } finally {\r\n            this.reset();\r\n          }\r\n        });\r\n    },\r\n    async reset() {\r\n      this.$toast.loading({\r\n        duration: 0,\r\n        message: '加载中...',\r\n        forbidClick: true\r\n      });\r\n      await this.getBasicByUserId();\r\n      await this.getNoBasic();\r\n      this.$toast.clear();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  .header {\r\n    height: 60px;\r\n  }\r\n  .cell {\r\n    margin-bottom: 15px;\r\n    .van-button {\r\n      height: 85px;\r\n    }\r\n    .nav {\r\n      margin: 5px;\r\n      font-size: 14px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0a056683&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=0a056683&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a056683\",\n  null\n  \n)\n\nexport default component.exports","import { post, get, postFile } from \"@/utils/request\";\r\n\r\n/**\r\n * 获取住户信息\r\n * @param {*} param\r\n * @returns\r\n */\r\nexport function getRentIdByUserId(param) {\r\n  return get(`getRentIdByUserId`, param);\r\n}\r\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","title","on","$event","goBack","scopedSlots","_u","key","fn","_t","proxy","staticRenderFns","props","type","String","default","methods","$router","go","component","_v","_l","hasMis","item","index","remove","miscellaneousId","baseName","_s","price","remark","noMis","add","baseId","getBasicByUserId","param","get","getNoBasic","insertMiscellaneous","changeMiscellaneousState","components","Header","data","rent","created","reset","userId","$store","getters","error","console","log","res","getRentIdByUserId","rentId","val","$dialog","confirm","message","then","$toast","success","state","loading","duration","forbidClick","clear"],"sourceRoot":""}